<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æˆ¿åœ°åˆä¸€ç¨…ç²åˆ©è©¦ç®—</title>
  <style>
    :root {
      --bg: #f1f5f9;
      --card-bg: #ffffff;
      --primary: #059669; /* Emerald 600 */
      --primary-hover: #047857;
      --text-main: #1e293b;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --focus-ring: rgba(16, 185, 129, 0.25);
      --danger-bg: #fef2f2;
      --danger-text: #ef4444;
      --highlight-bg: #ecfdf5;
      --highlight-text: #065f46;
    }

    body {
      font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background-color: var(--bg);
      color: var(--text-main);
      margin: 0;
      padding: 20px;
      line-height: 1.5;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }

    .container {
      background: var(--card-bg);
      width: 100%;
      max-width: 600px;
      border-radius: 20px;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
      padding: 32px;
      box-sizing: border-box;
    }

    /* Header Section */
    header {
      text-align: center;
      margin-bottom: 24px;
    }

    h1 {
      font-size: 24px;
      font-weight: 800;
      margin: 0 0 8px 0;
      color: var(--text-main);
    }

    .alert-box {
      background-color: var(--danger-bg);
      color: var(--danger-text);
      font-size: 14px;
      padding: 10px 14px;
      border-radius: 8px;
      display: inline-block;
      font-weight: 600;
      border: 1px solid #fee2e2;
    }

    /* Info Card */
    .info-card {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
      font-size: 14px;
    }
    
    .info-card strong {
      display: block;
      margin-bottom: 6px;
      color: var(--primary);
    }

    .rate-table {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      color: var(--text-muted);
      font-size: 13px;
    }

    /* Form Section */
    .section-title {
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      font-weight: 700;
      margin: 24px 0 12px 0;
      border-bottom: 2px solid var(--border);
      padding-bottom: 6px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    label {
      display: block;
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--text-main);
    }

    input[type="number"], select {
      width: 100%;
      padding: 12px 16px;
      font-size: 16px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background-color: #fff;
      transition: all 0.2s ease;
      box-sizing: border-box;
      color: var(--text-main);
      -moz-appearance: textfield; /* Remove arrows on Firefox */
    }

    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px var(--focus-ring);
    }

    .helper-text {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 5px;
    }

    /* Button */
    button#calc {
      width: 100%;
      padding: 16px;
      margin-top: 24px;
      background: linear-gradient(135deg, var(--primary), #10b981);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
      transition: transform 0.1s ease, box-shadow 0.2s ease;
    }

    button#calc:active {
      transform: scale(0.98);
      box-shadow: 0 2px 5px rgba(5, 150, 105, 0.2);
    }

    /* Result Section */
    .result-box {
      margin-top: 32px;
      background: var(--highlight-bg);
      border: 1px solid #d1fae5;
      border-radius: 16px;
      padding: 24px;
      text-align: center;
    }

    .result-row {
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px dashed #a7f3d0;
    }

    .result-row:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .result-label {
      font-size: 14px;
      color: var(--highlight-text);
      font-weight: 600;
      margin-bottom: 4px;
    }

    .result-value {
      font-size: 28px;
      font-weight: 800;
      color: var(--primary);
    }
    
    .result-value.net {
      color: #047857; /* Darker green for net profit */
    }

    .formula-note {
      margin-top: 12px;
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.4;
      text-align: left;
    }

    /* Footer */
    footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
      text-align: center;
      font-size: 14px;
      color: var(--text-muted);
    }

    .agent-name {
      font-weight: 700;
      color: var(--text-main);
      font-size: 16px;
      margin-bottom: 4px;
    }

    a.btn-line {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-top: 12px;
      padding: 8px 20px;
      background-color: #06c755; /* LINE Green */
      color: white;
      text-decoration: none;
      border-radius: 50px;
      font-weight: 600;
      font-size: 14px;
      transition: opacity 0.2s;
    }

    a.btn-line:hover {
      opacity: 0.9;
    }

    @media (max-width: 480px) {
      body {
        padding: 0;
        background: #fff;
      }
      .container {
        box-shadow: none;
        border-radius: 0;
        padding: 24px 20px;
      }
      .rate-table {
        grid-template-columns: 1fr;
      }
      .result-value {
        font-size: 24px;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>æˆ¿åœ°åˆä¸€ç¨…ç²åˆ©è©¦ç®—</h1>
    <div class="alert-box">âš ï¸ é©ç”¨æ°‘åœ‹ 105 å¹´å¾Œå–å¾—ä¹‹æˆ¿å±‹</div>
  </header>

  <div class="info-card">
    <strong>ğŸ“Š æŒæœ‰æœŸé–“ç¨…ç‡è¡¨</strong>
    <div class="rate-table">
      <span>â€¢ 2 å¹´ä»¥ä¸‹ï¼š45%</span>
      <span>â€¢ 2 ~ 5 å¹´ï¼š35%</span>
      <span>â€¢ 5 ~ 10 å¹´ï¼š20%</span>
      <span>â€¢ 10 å¹´ä»¥ä¸Šï¼š15%</span>
    </div>
  </div>

  <div class="section-title">ç¬¬ä¸€æ­¥ï¼šè¨ˆç®—æˆæœ¬</div>
  
  <div class="form-group">
    <label>1. æˆ¿å±‹å–å¾—æˆæœ¬</label>
    <input id="acquisition" type="number" placeholder="è«‹è¼¸å…¥é‡‘é¡" min="0" />
  </div>

  <div class="form-group">
    <label>2. è³¼è²·æ™‚ä»²ä»‹ç™¼ç¥¨</label>
    <input id="buyAgent" type="number" placeholder="0" min="0" />
  </div>

  <div class="form-group">
    <label>3. é›œé …è²»ç”¨ (ä»£æ›¸è²»ã€è¦è²»ç­‰)</label>
    <input id="misc" type="number" placeholder="0" min="0" />
  </div>

  <div class="form-group">
    <label>4. è£æ½¢ç™¼ç¥¨è²»ç”¨ <span style="font-weight:400; font-size:13px; color:#64748b">(å¯æ‰£æŠµç¨…é¡)</span></label>
    <input id="reno" type="number" placeholder="0" min="0" />
  </div>

  <div class="section-title" style="margin-top: 32px;">ç¬¬äºŒæ­¥ï¼šé ä¼°ç²åˆ©</div>

  <div class="form-group">
    <label>5. é è¨ˆè³£å‡ºé‡‘é¡</label>
    <input id="sellPrice" type="number" placeholder="è«‹è¼¸å…¥é å”®åƒ¹" min="0" />
  </div>

  <div class="form-group">
    <label>6. è³£å‡ºä»²ä»‹è²» (é è¨­ 4%)</label>
    <input id="sellAgent" type="number" placeholder="ç³»çµ±è‡ªå‹•è¨ˆç®—" min="0" />
    <div class="helper-text">*ä¾è³£å‡ºé‡‘é¡è‡ªå‹•è¨ˆç®—ï¼Œå¯æ‰‹å‹•ä¿®æ”¹</div>
  </div>

  <div class="form-group">
    <label>7. é è¨ˆæŒæœ‰å¹´é™</label>
    <select id="holding">
      <option value="45">æŒæœ‰ 2 å¹´ä»¥ä¸‹ (ç¨…ç‡ 45%)</option>
      <option value="35">æŒæœ‰ 2 ~ 5 å¹´ (ç¨…ç‡ 35%)</option>
      <option value="20">æŒæœ‰ 5 ~ 10 å¹´ (ç¨…ç‡ 20%)</option>
      <option value="15">æŒæœ‰ 10 å¹´ä»¥ä¸Š (ç¨…ç‡ 15%)</option>
    </select>
  </div>

  <button id="calc">é–‹å§‹è©¦ç®—</button>

  <div class="result-box" id="output">
    <div class="result-row">
      <div class="result-label">é ä¼°éœ€ç¹³ç´æˆ¿åœ°åˆä¸€ç¨…</div>
      <div class="result-value" id="tax">0</div>
    </div>
    
    <div class="result-row">
      <div class="result-label">è³£æ–¹å¯¦è³ºé‡‘é¡ (ä¸å«è£æ½¢)</div>
      <div class="result-value net" id="net">0</div>
    </div>

    <div class="formula-note">
      ğŸ’¡ <strong>è¨ˆç®—èªªæ˜ï¼š</strong><br>
      å¯¦è³ºé‡‘é¡ = è³£å‡ºåƒ¹ - (å–å¾—æˆæœ¬ + è²·è³£ä»²ä»‹è²» + é›œé … + ç¨…é‡‘)<br>
      *è£æ½¢è²»åƒ…ç”¨æ–¼æŠµç¨…ï¼Œä¸åˆ—å…¥ç¾é‡‘æµè¨ˆç®—
    </div>
  </div>

  <footer>
    <div class="agent-name">ä½å•†ä¸å‹•ç”¢ãƒ»æ°¸åº·å¾©åœ‹åº—ï½œå¼µå–»æš„</div>
    <div style="margin-top:4px">å…¬å¸åœ°å€ï¼šå°å—å¸‚æ°¸åº·å€å¾©åœ‹è·¯89è™Ÿ</div>
    <a class="btn-line" href="https://line.me/" target="_blank">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right:6px"><path d="M22 10.3c0-4.6-4.5-8.3-10-8.3S2 5.7 2 10.3c0 4.1 3.6 7.5 8.9 8.2.3 0 .8.2.9.5l.6 2c.2.5.1.9-.3.7L15 19.5c2.7-.8 5.7-3.8 5.7-7.2h1.3z"/></svg>
      åŠ  LINE é ç´„è«®è©¢
    </a>
    <div style="margin-top:16px; font-size:12px; opacity:0.6">Â© 2025 Jia Label. All Rights Reserved.</div>
  </footer>
</div>

<script>
  const $ = id => document.getElementById(id);
  function toCurrency(n){
    // ä½¿ç”¨ formatter è®“ $ ç¬¦è™Ÿå’Œåƒåˆ†ä½æ›´æ¨™æº–
    return new Intl.NumberFormat('zh-TW', { style: 'currency', currency: 'TWD', minimumFractionDigits: 0 }).format(n);
  }

  function calcAll(){
    const acq = parseFloat($('acquisition').value) || 0;
    const buyAgent = parseFloat($('buyAgent').value) || 0;
    const misc = parseFloat($('misc').value) || 0;
    const reno = parseFloat($('reno').value) || 0;
    const sell = parseFloat($('sellPrice').value) || 0;
    
    let sellAgent = parseFloat($('sellAgent').value) || 0;
    const autoSellAgent = sell * 0.04;
    
    // é‚è¼¯å„ªåŒ–ï¼šå¦‚æœæ¬„ä½æ˜¯ç©ºçš„ï¼Œæˆ–è€…æ˜¯ 0ï¼Œä¸”è³£åƒ¹å¤§æ–¼ 0ï¼Œå°±å¹«å¿™ç®— 4%
    if (sell > 0 && ($('sellAgent').value === '' || parseFloat($('sellAgent').value) === 0)) {
      sellAgent = autoSellAgent;
      $('sellAgent').value = Math.round(sellAgent); // æ›´æ–° UI é¡¯ç¤ºæ•´æ•¸
    }

    const rate = parseFloat($('holding').value) / 100.0;

    // ç²åˆ©è¨ˆç®— (èª²ç¨…åŸºç¤)
    const taxableGain = sell - sellAgent - acq - buyAgent - misc - reno;
    const tax = Math.max(0, taxableGain) * rate;
    
    // ç¾é‡‘æµè¨ˆç®— (å¯¦è³º)
    // æ³¨æ„ï¼šè£æ½¢è²»ç”¨å·²ç¶“æ˜¯æ”¯å‡ºéçš„ç¾é‡‘ï¼Œæ‰€ä»¥ç®—ã€Œæœ€å¾Œæ‹¿å›å£è¢‹çš„éŒ¢ã€æ™‚ï¼Œ
    // æ˜¯ è³£åƒ¹ - (ç•¶åˆè²·çš„éŒ¢ + è²·æ™‚ä»²ä»‹ + é›œè²» + è³£æ™‚ä»²ä»‹ + ç¾åœ¨è¦ç¹³çš„ç¨…)
    // è£æ½¢è²»ä¸é‡è¤‡æ‰£é™¤ï¼Œå› ç‚ºå®ƒåŒ…å«åœ¨ç•¶åˆçš„ç¾é‡‘æµå‡ºäº†ï¼Œä½†åœ¨é€™è£¡æˆ‘å€‘æ˜¯ç®—ã€Œé€™æ¬¡è³£å‡ºå¾Œçš„æ·¨ç¾é‡‘æµã€
    // åŸæœ¬çš„å…¬å¼: sell - (acq + buyAgent + misc + sellAgent + tax) æ˜¯æ­£ç¢ºçš„ "Net Proceeds" æ¦‚å¿µ
    const net = sell - (acq + buyAgent + misc + sellAgent + tax);

    $('tax').textContent = toCurrency(Math.round(tax));
    $('net').textContent = toCurrency(Math.round(net));
  }

  $('calc').addEventListener('click', calcAll);

  // ç›£è½è³£åƒ¹è®Šå‹•ï¼Œè‡ªå‹•æ›´æ–°ä»²ä»‹è²»
  $('sellPrice').addEventListener('input', ()=>{
    const sell = parseFloat($('sellPrice').value) || 0;
    // åªæœ‰ç•¶ä½¿ç”¨è€…æ²’æœ‰æ‰‹å‹•è¼¸å…¥éç‰¹æ®Šçš„ä»²ä»‹è²»æ™‚ï¼Œæ‰è‡ªå‹•æ›´æ–°
    // é€™è£¡ç°¡åŒ–é‚è¼¯ï¼šåªè¦è³£åƒ¹è®Šå‹•ï¼Œå°±é‡æ–°è¨ˆç®—å»ºè­°å€¼ (UX æœƒæ¯”è¼ƒé †æš¢)
    const autoSell = Math.round(sell * 0.04);
    $('sellAgent').value = autoSell;
  });
  
  // è®“æŒ‰ä¸‹ Enter ä¹Ÿå¯ä»¥è§¸ç™¼è¨ˆç®—
  document.addEventListener('keydown', (e) => {
    if(e.key === 'Enter') calcAll();
  });

  document.addEventListener('DOMContentLoaded', ()=>{
    // åˆå§‹åŒ–æ¸…ç©º
    $('sellAgent').value = ''; 
    calcAll();
  });
</script>
</body>
</html>